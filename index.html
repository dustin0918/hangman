<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="index.css">
    <title>Hangman</title>
</head>
<body>
    <script src="https://wow.techbrood.com/libs/jquery/jquery-1.11.1.min.js"></script>
    <div class="container">
            <div class="hook"></div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
            <div class="man">
                <div class="man-0 man-1"></div>
                <div class="man-0 man-2"></div>
                <div class="man-0 man-3"></div>
                <div class="man-0 man-4"></div>
                <div class="man-0 man-5"></div>
                <div class="man-0 man-6"></div>
            </div>
        </div>
        <div class="content">
            <div id="word"></div>
        
        </div>
        <div class="container">
            <div class="keyboardAll">
                <div class="floatDiv" id='A'>A</div>
                <div class="floatDiv" id='B'>B</div>
                <div class="floatDiv" id='C'>C</div>
                <div class="floatDiv" id='D'>D</div>
                <div class="floatDiv" id='E'>E</div>
                <div class="floatDiv" id='F'>F</div>
                <div class="floatDiv" id='G'>G</div>
                <div class="floatDiv" id='H'>H</div>
                <div class="floatDiv" id='I'>I</div>
                <div class="floatDiv" id='J'>J</div>
                <div class="floatDiv" id='K'>K</div>
                <div class="floatDiv" id='L'>L</div>
                <div class="floatDiv" id='M'>M</div>
                <div class="floatDiv" id='N'>N</div>
                <div class="floatDiv" id='O'>O</div>
                <div class="floatDiv" id='P'>P</div>
                <div class="floatDiv" id='Q'>Q</div>
                <div class="floatDiv" id='R'>R</div>
                <div class="floatDiv" id='S'>S</div>
                <div class="floatDiv" id='T'>T</div>
                <div class="floatDiv" id='U'>U</div>
                <div class="floatDiv" id='V'>V</div>
                <div class="floatDiv" id='W'>W</div>
                <div class="floatDiv" id='X'>X</div>
                <div class="floatDiv" id='Y'>Y</div>
                <div class="floatDiv" id='Z'>Z</div>
            </div>
        </div>
        
        
        <script language="JavaScript" type="text/javascript">
        let wordChoices = [
            'hangman',
            'untitled',
            'captain',
            'anonymous',
            'save',
            'settings',
            'console',
            'assets',
            'shortcuts',
            'comments',
            'delete',
            'collections',
            'fork',
            'share',
            'export',
            'embed',
            'apple',
            'banana'
        ];
        let result = 0;
        let wordStorage = '';
        let guesses = '';
        let missStorage = '';
        let word = document.querySelector('#word');
        let man = document.querySelectorAll('.man-0');
        
        function generateWordStorage() {
            wordStorage = wordChoices[Math.floor(Math.random() * wordChoices.length)];
        }
        
        function generateGuessWord() {
            let guessWord = '';
            let isFinish = true;
        
            for (let i = 0; i < wordStorage.length; i++) {
                if (wordStorage[i] != ' ') {
                    if (guesses.toUpperCase().indexOf(wordStorage[i].toUpperCase()) >= 0) {
                        guessWord += wordStorage[i].toUpperCase() + ' ';
                    } else {
                        guessWord += '_ ';
        
                        isFinish = false;
                    }
                } else {
                    guessWord += '  ';
                }
            }
        
            word.innerHTML = 'WORD: ' + guessWord;
        
            if (isFinish) {
                result = 1;
            }
        }
        
        function generateMisses() {
            let missedLetters = '';
        
            for (let i = 0; i < man.length; i++) {
                man[i].style.display = 'none';
            }
        
            for (let i = 0; i < missStorage.length; i++) {
                document.querySelector('.man-' + (i + 1)).style.display = 'block';
        
                missedLetters += missStorage[i] + ', ';
            }
        
            missedLetters = missedLetters.substring(0, missedLetters.length - 2);
        
            if (missStorage.length >= 6) {
                result = 2;
            }
        }
        
        function initializeGame() {
            result = 0;
            wordStorage = '';
            guesses = '';
            missStorage = '';
        
            word.innerText = '';
        
            generateWordStorage();
            generateGuessWord();
            generateMisses();
        }
        
        initializeGame();
        
        $('.floatDiv').click(function(){

        
              if (wordStorage.toUpperCase().indexOf($(this).text()) >= 0) {
                            guesses += $(this).text();
                        } else {
                            if (missStorage.toUpperCase().indexOf($(this).text()) < 0) {
                                missStorage += $(this).text();
                            }
                        }
        
              generateGuessWord();
              generateMisses();
        
               
            
              $(this).removeClass('floatDiv');
              $(this).addClass('floatDiv2');
              $(this).unbind(); 
              if (result === 1) {
                                $('.floatDiv').unbind(); 
        
                                if (confirm('You won! You have ' + missStorage.length + ' miss(es). ' + 'Do you like to try again?')) {
                                    window.location.reload()
                                }
                            } else if (result === 2) {
                                $('.floatDiv').unbind(); 
        
                                if (confirm('You lose! The answer is "' + wordStorage + '". Better luck next time. Do you like to try again?')) {
                                    window.location.reload()
                                }
                            }
        });
        
        </script>
    
</body>
</html>